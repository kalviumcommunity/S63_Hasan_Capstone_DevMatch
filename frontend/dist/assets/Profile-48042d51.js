import{r as h,u,V as r,b as g,j as e,d as N}from"./index-57f8324d.js";import{c as v,a as c,b as y,u as w,o as k}from"./index.esm-48778bfd.js";import{a as P,g as E,T as d,A as S}from"./commonSchema-04b1ee00.js";import{t as U}from"./truncateString-f6f42b12.js";import"./index-3bd4bce7.js";const I=()=>{const[a,s]=h.useState(!1),{addUser:i}=u(),n=h.useCallback(async l=>{s(!0);const o=r.loading("Loading...");try{const t=await g.patch("/profile/edit",l);t.data.success&&(i(t.data.data),r.success(t.data.message))}catch(t){t.response?r.error(t.response.data.message):r.error(t.message)}finally{s(!1),r.dismiss(o)}},[i]);return{isLoading:a,handleEditProfile:n}},L=v({age:P,gender:E,photoUrl:c().trim().required("Please provide the photo url").url("Please provide a valid URL"),about:c().trim().required("Please provide information about yourself").max(200,"About section should not exceed 200 characters").min(10,"About section must be at least 10 characters"),skills:y().of(c().trim()).min(1,"Please provide at least one skill").required("Please provide at least one skill").max(5,"You can add up to 5 skills only").test("skill-length","Each skill must be between 2 and 20 characters",a=>a?a.every(s=>s&&s.length>=2&&s.length<=20):!0),skillsInput:c().trim().required("Please provide the skills input")}),$=({user:a})=>{const{register:s,handleSubmit:i,setValue:n,formState:{errors:l,isValid:o}}=w({resolver:k(L),mode:"onChange",defaultValues:{gender:a==null?void 0:a.gender,age:a==null?void 0:a.age,about:a==null?void 0:a.about,photoUrl:a==null?void 0:a.photoUrl,skills:(a==null?void 0:a.skills)||[],skillsInput:a!=null&&a.skills?a==null?void 0:a.skills.join(", "):""}}),t=m=>{const j=m.target.value.split(",").map(x=>x.trim()).filter(x=>x!="");n("skills",j,{shouldValidate:!0})},{isLoading:p,handleEditProfile:b}=I(),f=async m=>{await b(m)};return e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body px-4 sm:px-6",children:[e.jsx("h2",{className:"card-title text-xl sm:text-2xl",children:"Edit Profile"}),e.jsx("p",{className:"text-base-content/70 text-sm",children:"Update your DevMatch profile information"}),e.jsxs("form",{noValidate:!0,onSubmit:i(f),className:"mt-6 space-y-6 text-sm",children:[e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{htmlFor:"name",className:"label",children:e.jsx("span",{className:"label-text",children:"Name"})}),e.jsx("input",{type:"text",value:a==null?void 0:a.name,placeholder:"Enter your name",disabled:!0,readOnly:!0,className:"input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0"})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{htmlFor:"email",className:"label",children:e.jsx("span",{className:"label-text",children:"Email"})}),e.jsx("input",{type:"email",value:a==null?void 0:a.email,placeholder:"Enter your email",className:"input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0",disabled:!0,readOnly:!0})]}),e.jsxs("div",{className:"flex flex-col items-center sm:flex-row sm:items-start gap-4",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"w-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2",children:e.jsx("img",{src:a.photoUrl||"https://via.placeholder.com/150",alt:"Profile",loading:"lazy"})})}),e.jsxs("div",{className:"form-control w-full space-y-1 relative",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Profile Photo URL"})}),e.jsx("input",{type:"text",...s("photoUrl"),placeholder:"https://example.com/photo.jpg",className:`input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.photoUrl)&&"border-red-500"}`}),(l==null?void 0:l.photoUrl)&&e.jsx(d,{message:l.photoUrl.message}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Provide a URL to your profile picture"})})]})]}),e.jsxs("div",{className:"form-control space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Gender"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"radio",...s("gender"),className:"radio radio-primary",value:"male"}),e.jsx("span",{className:"label-text",children:"Male"})]}),e.jsxs("label",{className:"label cursor-pointer justify-start gap-2",children:[e.jsx("input",{type:"radio",...s("gender"),className:"radio radio-primary",value:"female"}),e.jsx("span",{className:"label-text",children:"Female"})]})]})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Age"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:18,...s("age"),placeholder:"Enter your age",className:`input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.age)&&"border-red-500"}`}),(l==null?void 0:l.age)&&e.jsx(d,{message:l.age.message})]})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Skills (Enter up to 5 skills, separated by commas)"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",...s("skillsInput"),onChange:t,placeholder:"React, Node.js, MongoDB, etc.",className:`input input-bordered w-full h-12 focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.skills)&&"border-red-500"}`}),(l==null?void 0:l.skills)&&e.jsx(d,{message:l.skills.message})]}),e.jsx("input",{type:"hidden",...s("skills")})]}),e.jsxs("div",{className:"form-control w-full space-y-1",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"About Me"})}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{...s("about"),placeholder:"Tell other developers about yourself...",className:`textarea textarea-bordered h-32 w-full resize-none focus:outline-0 focus-within:outline-0 ${(l==null?void 0:l.about)&&"border-red-500"}`}),(l==null?void 0:l.about)&&e.jsx(d,{message:l.about.message})]})]}),e.jsx("div",{className:"card-actions justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:!o||p,className:"btn btn-primary min-w-[120px]",children:p?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"animate animate-spin text-lg"}),"Saving..."]}):"Save Changes"})})]})]})})},A=({user:a})=>{const{name:s,about:i,age:n,gender:l,photoUrl:o}=a;return e.jsx("div",{draggable:!1,className:"max-w-sm border border-gray-200 rounded-lg overflow-hidden pointer-events-none lg:block hidden",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("img",{src:o,draggable:"false",loading:"lazy",className:"h-[60%] w-full object-cover",alt:"user"}),e.jsxs("div",{className:"p-4 bg-base-200 flex flex-col justify-between h-[40%]",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:s}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 sm:mt-1 mb-2",children:`${n}, ${l}`}),e.jsx("p",{className:"text-base-content text-base",children:U(i,50)||"No description available"})]}),e.jsxs("div",{className:"card-actions hidden sm:flex justify-between space-x-2 mt-4",children:[e.jsx("button",{className:"btn btn-error btn-sm sm:btn-md flex-1",children:"Ignore"}),e.jsx("button",{className:"btn btn-primary btn-sm sm:btn-md flex-1",children:"Interested"})]})]})]})})},T=()=>{const{user:a}=u();return a?e.jsxs("div",{className:"flex flex-1 justify-center gap-10 items-center relative my-10 px-3",children:[e.jsx($,{user:a}),e.jsx(A,{user:a})]}):e.jsx(N,{})};export{T as default};
