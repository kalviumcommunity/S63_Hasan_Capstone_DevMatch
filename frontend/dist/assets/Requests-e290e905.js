import{u as o,V as c,b as d,j as s,r as i}from"./index-57f8324d.js";import{t as m}from"./truncateString-f6f42b12.js";const x=e=>{const{updateRequests:n}=o();return{handleReviewRequest:async l=>{const r=c.loading("Loading...");try{const t=await d.post(`/request/review/${l}/${e}`);t.data.success&&(n(e),c.success(t.data.message))}catch(t){t.response?c.error(t.response.data.message):c.error(t.message)}finally{c.dismiss(r)}}}},u=({request:e})=>{const{_id:n}=e,{photoUrl:a,name:l,about:r}=e.senderId,{handleReviewRequest:t}=x(n);return s.jsxs("div",{className:"flex flex-wrap items-center gap-5 bg-base-100 p-5 rounded-lg md:flex-nowrap",children:[s.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[s.jsx("img",{src:a,className:"w-12 h-12 md:w-16 md:h-16 rounded-full",alt:"request-img",loading:"lazy"}),s.jsxs("div",{className:"text-left space-y-1",children:[s.jsx("h3",{className:"font-semibold text-sm md:text-base",children:l}),s.jsx("p",{className:"text-xs md:text-sm",children:m(r,60)})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-3 w-full md:w-auto",children:[s.jsx("button",{onClick:()=>t("rejected"),className:"btn btn-error btn-sm sm:btn-md",children:"Reject"}),s.jsx("button",{onClick:()=>t("accepted"),className:"btn btn-primary btn-sm sm:btn-md",children:"Accept"})]})]})},p=()=>{const{addRequests:e}=o();i.useEffect(()=>{(async()=>{try{const a=await d.get("/user/requests/received");a.data.success&&e(a.data.data)}catch(a){a.response&&console.error(a.response.data.message)}})()},[e])},R=()=>{p();const{requests:e}=o();return s.jsx("div",{className:"text-center my-8 max-w-3xl w-full mx-auto px-3",children:(e==null?void 0:e.length)===0?s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"sm:text-3xl text-2xl font-bold text-neutral-content",children:"No Connection Requests Received!"}),s.jsx("img",{loading:"lazy",src:"/assets/empty-requests.svg",alt:"user-not-found",className:"block mx-auto w-96"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("h2",{className:"text-2xl sm:text-3xl font-bold",children:["Incoming Connection Requests (",e==null?void 0:e.length,")"]}),s.jsx("div",{className:"space-y-6 mt-8",children:e==null?void 0:e.map(n=>s.jsx(u,{request:n},n._id))})]})})};export{R as default};
